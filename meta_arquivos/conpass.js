var Conpass=function(e){"use strict";function t(e,t){var o=document.createElement("div");return o.id="conpassMask-"+e,o.style.setProperty("position",t.position,"important"),o.classList.add("conpassMask"),o.style.left=0,o.style.top=0,ye.overlayColor&&o.style.setProperty("background-color","rgb("+ye.overlayColor+")","important"),o.width=0,o.height=0,o.addEventListener("click",function(){}),o}function o(e){e||(e=b(de.element));var t=D(e);t?(S(!0),function(e){var t=B("left");t.style.top=e.top+"px",t.style.height=e.height+"px",t.style.width=e.left+"px",t.style.setProperty("background-color",ye.overlayColor,"important"),t.style.setProperty("opacity",ye.overlayOpacity||.7,"important")}(t),function(e){var t=B("top");t.style.height=e.top+"px",t.style.width=T()+"px",t.style.setProperty("background-color",ye.overlayColor,"important"),t.style.setProperty("opacity",ye.overlayOpacity||.7,"important")}(t),function(e){var t=B("right"),o=e.left+e.width;t.style.height=e.height+"px",t.style.width=T()-o+"px",t.style.left=o+"px",t.style.top=e.top+"px",t.style.setProperty("background-color",ye.overlayColor,"important"),t.style.setProperty("opacity",ye.overlayOpacity||.7,"important")}(t),function(e){var t=B("bottom"),o=e.top+e.height;t.style.height=function(){var e=document.body,t=document.documentElement;return Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)}()-o+"px",t.style.top=o+"px",t.style.width=T()+"px",t.style.setProperty("background-color",ye.overlayColor,"important"),t.style.setProperty("opacity",ye.overlayOpacity||.7,"important")}(t)):ve.warn("Elemento nao encotrado para construir o esmaecer:",elementInPage)}function n(e){var o=document.getElementById("conpassMasks");o||((o=document.createElement("div")).id="conpassMasks",o.appendChild(t("left",e)),o.appendChild(t("top",e)),o.appendChild(t("right",e)),o.appendChild(t("bottom",e)),document.body.appendChild(o))}function r(){window.conpassInitHasCalled=!1,window.startFlowCalled=!1,ce.needToSync=!1,ve.log("Conpass foi reiniciada via: OnHashChange."),Conpass.init(ce)}function a(e){e=e||function(e){};try{!function(){try{jConpass.expr.filters.offscreen=function(e){var t=e.getBoundingClientRect();return t.x+t.width<0||t.y+t.height<0||t.x>window.parent.innerWidth||t.y>window.parent.innerHeight}}catch(e){ve.error("Error in add OffScreen to Jquery",e)}}()}catch(e){ve.error("Error while configuring jQuery ",e)}Conpass.loadfile("jConpass.scrollTo.js","js",Conpass.appUrl,function(){e()})}function i(){return-1!=navigator.userAgent.toLowerCase().search(/(android|avantgo|blackberry|bolt|boost|cricket|docomo|fone|hiptop|mini|mobi|palm|phone|pie|tablet|up\.browser|up\.link|webos|wos)/i)&&(x(),l(),ve.info("Does not work on mobile browsers. :("),!0)}function s(){var t=e.getConpassData();t&&!t.alreadyStarted&&(t.flow=null,t.timeoutID=null,V(t))}function l(){x();var e=document.getElementById("conpassFade");e&&e.parentNode.removeChild(e);var t=document.getElementById("conpassAssistant");t&&t.parentNode.removeChild(t)}function c(){return!!window.parent.document.getElementById("conpassAssistant")}function d(){if(!document.getElementById("conpassFade")){var e=document.createElement("div");e.id="conpassFade",e.classList.add("conpassFade"),e.style.setProperty("background-color",ye.overlayColor,"important"),e.style.setProperty("opacity",ye.overlayOpacity||.7,"important"),e.addEventListener("click",function(){}),document.body.insertBefore(e,document.body.lastChild)}}function u(){for(var e=document.getElementsByClassName("conpassModal"),t=0;t<e.length;t++)e[t].remove();var o=document.getElementById("conpassFade");o&&o.remove()}function p(){u();var e=ee();U("step","finished",ce,de,new Date,e)}function f(){u();var e=ee();U("step","canceled",ce,de,new Date,e),U("flow","canceled",ce,ue,new Date,e),F(),ce.persist()}function m(){for(var t=document.getElementsByName("flow"),o="",n=0;n<t.length;n++)t[n].checked&&(o=t[n].value);""!=o&&(p(),o===ue._id?h(parseInt(de.order)+1):(te(),e.startFlowById(o,{mainFlow:ue,show:!0})))}function v(){p(),x(),h(parseInt(de.order)+1)}function g(e,t){try{if(e&&t&&e.events)for(var o=0;o<e.events.length;o++){var n=e.events[o];t.removeEventListener?n.listener&&n.name&&t.removeEventListener(n.name,n.listener):t.detachEvent&&n.listener&&n.name&&t.detachEvent(n.name,n.listener)}}catch(e){ve.warn("Falha ao remover EventListener")}}function y(e){if((e=e||{}).title){var t=new CustomEvent("flowcompleted",{detail:e.title});window.dispatchEvent(t)}else ve.warn("Flow is null in dispatchEventFinishFlow")}function h(e,t,o){var o=o||{},t=t||function(){};if(ue.steps){ge&&Ie(e);for(var n=null,r=0;r<ue.steps.length;r++)if(ue.steps[r].order==e){n=ue.steps[r];break}if(n){var a={};switch(a=de,de=n,q(ue,de),a&&g(a,a.elementInPage),window.addEventListener("beforeunload",function(e){if(de||ue){var t=Conpass.getConpassData(),o=de,n=ue.steps;if(t&&1==t.alreadyStarted)for(var r=null,a=0;a<n.length;a++)if(n[a].order==parseInt(o.order)){r=n[a],ce.setStep(r),ce.save();break}}}),ve.info("Passo iniciado: "+de.order+" ",de.title),ce.setStep(n),ce.save(t,o),n.type.toString().toLowerCase()){case"modal":!function(e){x(),Y(),function(e,t){t=t||function(){},d();var o='<div id="conpassModalContent" class="conpassModalContent" style="border-radius: '+ye.modal.radius+" !important;background-color: "+ye.modal.background+' !important;"><div id="conpassModalHeader" class="conpassModalHeader" style="background-color: '+ye.modal.headerBackground+' !important;"><button type="button" id="conpassButtonClose" class="conpassButtonClose">&times;</button><img id="pickAvatarModal" class="pickAvatarModal"/><p class="nameAssistant"></p><h4 class="conpassModalTitle" id="conpassModalTitle"></h4><div id="conpassModalTitleHello" class="conpassModalTitleHello"></div></div><div id="conpassModalBody" class="conpassModalBody" style="color: '+ye.modal.fontColor+' !important;"></div><div class="conpassModalFooter"><button type="button" id="conpassButton" class="conpassButton" style="border-radius: '+ye.btnRadius+" !important; background-color: "+ye.btnPrimaryColor+' !important;"></button></div></div></div>',n=document.createElement("div");n.id="conpassModal",n.classList.add("conpassModal"),n.innerHTML=o,document.body.insertBefore(n,document.body.childNodes[0]),document.getElementById("conpassButtonClose").addEventListener("click",f),document.getElementById("conpassButton").addEventListener("click",m);var r=document.getElementById("conpassButton");r&&(r.innerHTML=e.properties.buttonStartTxt);var a=e.properties.imgAssistant||ue.assistant.imgAssistant;document.getElementById("pickAvatarModal").src=a,document.querySelector(".nameAssistant").innerHTML=e.properties.descriptionAssistant,document.getElementById("conpassModalTitleHello").innerHTML=e.properties.welcomeMessage;var i="<p>"+e.properties.introTxtModal+"</p>",s=e.properties.listModal;s.sort(function(e,t){var o=e.order,n=t.order;return o<n?-1:o>n?1:0});for(var l in s){var c="0"===l?'checked=""':"";s[l].idFlow&&(i+='<div class="conpassPathsSelection">',i+='<label style="color: '+ye.modal.fontColor+' !important;"><input type="radio" class="conpassRadio" name="flow" value="'+s[l].idFlow+'" '+c+">  "+s[l].titleFlow+"</label>",i+="</div>")}document.getElementById("conpassModalBody").innerHTML=i,t()}(e,function(){H("conpassFade"),H("conpassModal")});var t=X();t.alreadyStarted=!0,V(t),ce.setStep(de),ce.save();var o=ee();U("step","start",ce,de,new Date,o),de.properties&&de.properties.integrateRdStation&&w(ce,ue,de)}(de);break;case"video":!function(e){R(e,function(){!function(e,t){_(e,{css:"conpassVideoModal"},function(){var t=e.properties.introTxtModal,o=function(e){var t=e.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/);return!(!t||11!=t[7].length)&&t[7]}(e.properties.videoUrl),n=e.properties.videoWidth||660,r=e.properties.videoHeight||370,a="";t&&(a+='<p class="videoTitle">'+t+"<p>"),o&&(a+='<iframe width="'+n+'" height="'+r+'" src="https://www.youtube.com/embed/'+o+'" frameborder="0"></iframe>'),document.getElementById("conpassModalBody").innerHTML=a},t)}(e,function(){H("conpassFade"),H("conpassModal")})})}(de);break;case"popover":!function(e){if(!C(e)||e.delay){var t=0,o=15,n=e.delay||100,r=setInterval(function(){t>=o&&!i?clearInterval(r):(C(e)&&(clearInterval(r),k(e)),t++)},n),a=X(),i=e.neverStopFindElement;a.timeoutID=r,V(a)}else k(e)}(de);break;case"notification":!function(e){R(e,function(){!function(e,t){_(e,{css:"conpassNotificationModal"},function(){var t=e.messages,o="",n="";e.properties.imgNotification&&(n='<img src="'+e.properties.imgNotification+'" />'),e.properties.introTxtModal&&(o+='<p class="notificationTitle">'+e.properties.introTxtModal+"</p>"),e.properties.imgNotification&&(n='<img src="'+e.properties.imgNotification+'" />');for(var r=0;r<t.length;r++){var a=t[r];o+="<div>"+a.text+"</div>"}document.getElementById("conpassModalBody").innerHTML=o,document.getElementById("conpassModalHeader").innerHTML=n},t)}(e,function(){H("conpassFade"),H("conpassModal")})})}(de)}ce.persist()}else{ve.info("Fluxo finalizado: "+ue.title),y(ue),Y(),g(de,de.elementInPage);var i=ee();U("flow","finished",ce,ue,new Date,i),F(t),ce.persist()}}else ve.warn("Nao ha passos para este fluxo:"+ue.title)}function w(e,t,o){if(e&&e.email)if(o)if(t){if(t.properties.rdStationToken&&t.properties.rdStationToken.length>1){var n="token_rdstation="+t.properties.rdStationToken+"&email="+e.email+"&identificador="+("CONPASS Onboarding. Fluxo: "+t.title+"- Passo: "+o.title);try{O("POST","https://www.rdstation.com.br/api/1.2/conversions",{contentType:"application/x-www-form-urlencoded",externURI:!0,data:n,onSuccess:function(e){ve.info("Sucess on send data for RDStation:",e)},onError:function(e){ve.error("Error on send data for RDStation(httpRequest):",e)}})}catch(e){ve.error("Error on send data for RDStation:",e)}}}else ve.warn("Flow is required. [Send data RDStation]");else ve.warn("Step is required. [Send data RDStation]");else ve.warn("User Email is required. [Send data RDStation]")}function b(e,t){function o(e,t,o){var r=null,a=window.frames;if(t&&""!==t){var i=jConpass(t);if(i&&i[0])return i[0];for(l=0;l<a.length;l++)try{if(d=(c=a[l].document).querySelector(t))return d}catch(e){ve.error(e),ve.warn("Erro ao pesquisar o Elemento dentro de Frames com Selector (getElementInDocument).")}}if(t&&(r=o.querySelector(t)),r)return r;var s=o.getElementsByTagName(e.tagName);s=Array.prototype.slice.call(s,0);for(var l=0;l<a.length;l++)try{var c=a[l].document,d=c.getElementsByTagName(e.tagName);d=Array.prototype.slice.call(d,0),s=s.concat(d)}catch(e){ve.error(e),ve.error("Erro ao pesquisar o Elemento dentro de Frames (getElementInDocument).")}return(r=n(e,"idHTML","id",s))||(r=n(e,"outerHTML","outerHTML",s)),r||(r=n(e,"textContent","textContent",s)),r||(r=n(e,"nameHTML","name",s)),r}function n(e,t,o,n){if(!e.hasOwnProperty(t))return null;var r=e[t];if(!r)return null;if("idHTML"===t)return function(e,t,o,n){for(var r=new RegExp(e.idHTML.toString()),a=0;a<n.length;a++){var i=n[a];if(r.test(i.id.toString()))return i}return null}(e,0,0,n);for(var a=0;a<n.length;a++){var i=n[a];if(j(i[o])===j(r)){if(!e.parentID)return i;var s=i.parentNode,l=1,c=!0;do{if(s.id&&s.id.length>1&&s.id==e.parentID)return!0,c=!1,i;s=s.parentNode,l++}while(c&&l<10)}}}{if(e||t){return o(e,t,document)}ve.warn("Elemento do passo nao definido.")}}function C(e){if(e){var t=b(e.element,e.elementSelector);if(null==t)return ve.warn("Elemento nao encontrado na pagina. Titulo do passo: ",e.title,e),!1;var o=D(t);return!(!o||!(o.left>0||o.top>0))||(ve.warn("Elemento encontrado, mas com posicao incorreta. Por favor recapture. Titulo do fluxo: ",e.title,e),!1)}}function E(e,t){var o="";return e.currentStyle?o=e.currentStyle[t]:document.defaultView&&document.defaultView.getComputedStyle&&(o=document.defaultView.getComputedStyle(e,null).getPropertyValue(t)),o&&o.toLowerCase?o.toLowerCase():o}function S(e){var t=document.getElementById("conpassMasks");if(t){var o=t.classList.contains("conpassHidden");e&&o&&t.classList.remove("conpassHidden"),!e&!o&&t.classList.add("conpassHidden")}}function I(){S(!1)}function B(e){return document.getElementById("conpassMask-"+e)}function T(){return Math.max(document.body.clientWidth,window.innerWidth)}function k(e,t){function r(e){e.addEventListener("scroll",function(){oe()},!1)}function a(e){document.getElementById("closePopover").addEventListener("click",function(){I(),function(){A(),g(de,de.elementInPage);var e=ee();U("step","canceled",ce,de,new Date,e),U("flow","canceled",ce,ue,new Date,e),F(),Y(),ce.persist()}()}),document.getElementById("nextMessage").addEventListener("click",function(){!function(){var e=parseInt(pe.position)+1;if(e<=fe.position){for(var t=0;t<de.messages.length;t++)de.messages[t].position==e&&(pe=de.messages[t]);pe.text?document.getElementById("conpassTextMessage").innerHTML=pe.text:document.getElementById("conpassTextMessage").innerHTML=""}else g(de,de.elementInPage),A(),function(){var e=ee();U("step","finished",ce,de,new Date,e),h(parseInt(de.order)+1)}();H("previousMessage",null,"inline-block")}()}),document.getElementById("previousMessage").addEventListener("click",function(){!function(){var e=parseInt(pe.position)-1;if(e>0){for(var t=0;t<de.messages.length;t++)de.messages[t].position==e&&(pe=de.messages[t]);void 0!=pe.text&&null!=pe.text&&pe.text.length>0?document.getElementById("conpassTextMessage").innerHTML=pe.text:document.getElementById("conpassTextMessage").innerHTML=""}pe.position<=1&&function(e,t){if(t=t||function(){},void 0===document.getElementById(e)||null===document.getElementById(e))return;void 0==document.getElementById(e).style||null==document.getElementById(e).style?document.getElementById(e).setAttribute("style","display:none"):document.getElementById(e).style.display="none";t()}("previousMessage");e<1&&(P(de.namePopover),h(parseInt(de.order)-1));he.click&&he.click();he.mouseenter&&he.mouseenter();he.mouseleave&&he.mouseleave()}()})}de=e||de,t=t||function(){},pe={},fe={},de.events=null,x(),Y(),de.triggerMode=de.triggerMode||"onOkButton";de.triggerMode;de.elementInPage=b(de.element,de.elementSelector);E=D(de.elementInPage);if(!E)return I(),void ve.warn("Elemento nao encontrado na pagina. Titulo do passo:",de.title);de.namePopover="conpassPopover"+de._id+de.element.tagName.toLowerCase(),de.placement||(de.placement="top");if(document.getElementById(de.namePopover))ve.warn("Another popover with same id already exists. Id: ",de.namePopover);else{for(var i=de.elementInPage,s=re(i,!1),l=i,c=window.parent.frames,d=0;d<c.length;d++)try{r(c[d].document)}catch(e){ve.warn('Falha "addScroll" no Frames.',e)}try{if(ae(de.elementInPage)){var u=ne(de.elementInPage);jConpass(u).scrollTo(de.elementInPage,0,{axis:"y",offset:{top:-250}})}for(;!function(e){if(window.frameElement&&"IFRAME"==window.frameElement.nodeName)return!1;return document.body===e}(s);)r(s),jConpass(s).scrollTo(l,0,{axis:"y",offset:{top:-250}}),l=s,s=re(s,!1)}catch(e){ve.warn("Falha em realizar o scroll automatico.",e)}var p='<div class="conpassPopoverHead">';p+='<div class="titlePopover" style="color: '+ye.popover.fontColor+' !important;">'+de.title+"</div>",p+='<div id="closePopover" class="closePopover">&times;</div>',p+="</div>",p+=function(e){var t='<div class="contentPopover">';if(t+='<div class="imgPopover"><img  class="pickAvatar" src="'+(de.properties.imgAssistant||ue.assistant.imgAssistant)+'" alt="" /></div>',de.messages.length>0){for(var o=0;o<de.messages.length;o++)1==de.messages[o].position&&(pe=de.messages[o]),de.messages[o].position==de.messages.length&&(fe=de.messages[o]);t+='<div class="conpassMessage" id="conpassTextMessage" style="color: '+ye.popover.fontColor+' !important;">'+pe.text+"</div>"}return t+="</div>",t+='<div class="footerPopover">',de.order>1?t+='<div id="previousMessage" class="previousMessage" style="display:inline-block "><div id="previousBtn" class="simpleButtonConpass" style="background-color: '+ye.btnBackColor+" !important; border-radius: "+ye.btnRadius+' !important;">ANTERIOR</div></div>':t+='<div id="previousMessage" class="previousMessage" style="display:none "><div id="previousBtn" class="simpleButtonConpass">ANTERIOR</div></div>',t+='<div id="nextMessage" class="nextMessage" style="display:inline-block "><div id="nextBtn" class="simpleButtonConpass" style="background-color: '+ye.btnPrimaryColor+" !important; border-radius: "+ye.btnRadius+' !important;">PR&#211;XIMO</div></div>',t+="</div>"}(),p+='<div class="conpassArrow"></div>';var f=document.createElement("div");f.id=de.namePopover,f.innerHTML=p,f.visibility="hidden",f.classList.add("conpassPopover"),f.style.setProperty("background-color",ye.popover.background,"important"),f.style.setProperty("border-radius",ye.popover.radius,"important"),document.body.insertBefore(f,document.body.childNodes[0]),a(),document.getElementById("nextBtn").innerText=de.properties.btnNextMsg,document.getElementById("previousBtn").innerText=de.properties.btnPreviousMsg,le(de.placement,de.element,de.namePopover,de.elementInPage,de.elementSelector);var m=document.getElementById(de.namePopover),v=de.properties.blockAutoScroll,y=jConpass(i);if(u&&(y=u.contents().find(i)),!v&&y.is(":offscreen")?M(m.offsetTop,m.offsetHeight):u&&u.is(":offscreen")&&M(m.offsetTop,m.offsetHeight),de.useFade){var E;n(E=D(de.elementInPage)),o(de.elementInPage)}if(de.triggerMode){if("onElementClick"===de.triggerMode){(S=document.getElementById("nextMessage")).style.display="none",function(e){e=e||de.elementInPage,de.events||(de.events=[]);var t=de.properties.isSpa,o=null,n=null,r=jConpass._data(jConpass(e)[0],"events");r&&r.click&&!t&&(o=r.click[0].handler,n=r.click[0].data,jConpass(e).unbind("click"));var a={};a.name="click",a.listener=function(r){if(de){"radio"!=jConpass(e).attr("type")&r&&r.preventDefault();var i=de.order,s=ee();if(U("step","finished",ce,de,new Date,s),I(),A(),this.href&&!o&&!t){var l=!0;"#"===this.getAttribute("href")&&(this.getAttribute("data-target")&&(l=!1),console.log("Conpass: click no elemento 'a' (href==#)."),jConpass(e).click(),jConpass(e).trigger("click"),l=!1),this.target&&"_self"!==this.target&&(console.log("Conpass: click no elemento 'a' (target!==_self)."),l=!1),this.hash&&(console.log("Conpass: click no elemento 'a' (hash)."),l=!1),console.log("Conpass: click no elemento 'a'. Redirecionamento (window.location).");var c=this.href;o=function(){l&&(window.location=c)}}if(o&&(o=o.bind(this),n)){var d=n.self;o=o.bind(d)}return h(parseInt(i)+1,o,r),e.removeEventListener(a.name,a.listener),!t&&void 0}},de.events.push(a),e.addEventListener(a.name,a.listener)}()}if("onMouseOver"===de.triggerMode){var S=document.getElementById("nextMessage");S.style.display="none",function(e){e=e||de.elementInPage,he.mouseenter=function(){e.removeEventListener(t.name,t.listener)},he.mouseleave=function(){e.removeEventListener(o.name,o.listener)};var t={name:"mouseenter"},o={name:"mouseleave"};t.listener=function(e){e.stopPropagation(),setTimeout(function(){var e=parseInt(de.order)+1;ue.steps[e-1].useFade=!1,h(e)},100),he.mouseenter&&he.mouseenter()},o.listener=function(e){e.stopPropagation(),setTimeout(function(){C(de)},300),he.mouseenter&&he.mouseenter(),he.mouseleave&&he.mouseleave()},e.addEventListener(t.name,t.listener),e.addEventListener(o.name,o.listener)}()}}var B=X();B.alreadyStarted=!0,V(B),ce.setStep(de),ce.save();var T=ee();U("step","start",ce,de,new Date,T),de.properties&&de.properties.integrateRdStation&&w(ce,ue,de),t()}}function M(e,t){var o=parseInt(parseInt(e)-1.5*t);o<0&&(o=0),function(e,t,o){if(void 0==e.scrollTop()||null==e.scrollTop())return;var n=e.scrollTop(),r=t-n,a=0,i=function(){var t=function(e,t,o,n){if((e/=n/2)<1)return o/2*e*e+t;return e--,-o/2*(e*(e-2)-1)+t}(a+=20,n,r,o);e.scrollTop(t),a<o&&setTimeout(i,20)};i()}(jConpass(window.top.document),o,1500)}function L(){de.order>1&&(x(),h(parseInt(de.order)-1))}function F(e){e=e||function(){};ce.setStep(null),ce.setFlow(null),ce.save(e),de=null,ue=null;var t=X();t.alreadyStarted=!1,t.flow=null,V(t),te()}function P(e){if(e){var t=document.getElementById(e);t&&(I(),t.remove())}}function x(){u(),A()}function A(){I();for(var e=document.getElementsByClassName("conpassPopover"),t=0;t<e.length;t++)e[t].remove()}function H(e,t,o){t=t||function(){},o=o||"block",void 0!==document.getElementById(e)&&null!==document.getElementById(e)&&(void 0==document.getElementById(e).style||null==document.getElementById(e).style?document.getElementById(e).setAttribute("style","display:"+o.toString()):document.getElementById(e).style.display=o.toString(),t())}function j(e){return e.replace(/\s+/g,"")}function D(e){function t(e,t){var o=Number(E(e,"margin-"+t).replace("px",""));return o>0?o:0}function o(e){if(!e)return null;var o=function(e){return{top:t(e,"top"),left:t(e,"left"),right:t(e,"right"),bottom:t(e,"bottom")}}(e),n=jConpass(e).outerWidth(),r=jConpass(e).outerHeight(),a=function(e){if(!ae(e))return jConpass(e).offset();var t=ne(e),o=jConpass(t).contents().scrollTop(),n=jConpass(t).offset(),r=jConpass(e).offset();if(!n)return ve.error("Offset não definido para iframe"),{top:null,left:null};if(!r)return ve.error("Offset não definido para target"),{top:null,left:null};var a=n.left+r.left-jConpass(document).scrollLeft();return{top:n.top+r.top-jConpass(t).scrollTop()-o,left:a}}(e);return{top:parseFloat(a.top),left:parseFloat(a.left),width:n,height:r,position:{}.isFixed?"fixed":"absolute",margins:o}}if(!e)return null;return o(e)}function N(e,t,o,n,r){var a=function(e,t,o,n,r){if(!e||!t||!o)return{error:!0,body:"black values"};if(n||(n=b(t,r)),!n)return{error:!0,body:"no elementInPage"};if(i())return{error:!0,body:"is mobile"};var a=document.getElementById(o),s=a.offsetWidth,l=a.offsetHeight,c=0,d=0,u=D(n);switch(e.toString().toLowerCase()){case"top":c=u.left+parseFloat(n.offsetWidth)/2-s/2,d=u.top-(l+13);break;case"left":c=u.left-(parseFloat(s)+11),d=u.top-l/2+parseFloat(n.offsetHeight)/2;break;case"right":c=u.left+(parseFloat(n.offsetWidth)+11),d=u.top-l/2+parseFloat(n.offsetHeight)/2;break;case"bottom":c=u.left+parseFloat(n.offsetWidth)/2-s/2,d=u.top+(parseFloat(n.offsetHeight)+11);break;case"top-right":c=u.left+(parseFloat(n.offsetWidth)+7),d=u.top-(l+7);break;case"top-left":c=u.left-(parseFloat(s)+6),d=u.top-(l+6);break;case"bottom-right":c=u.left+(parseFloat(n.offsetWidth)+6),d=u.top+(parseFloat(n.offsetHeight)+6);break;case"bottom-left":c=u.left-(parseFloat(s)+7),d=u.top+(parseFloat(n.offsetHeight)+6)}return de&&de.properties&&(de.properties.verticalAdjustment&&(d=de.properties.verticalAdjustment+d),de.properties.horizontalAdjustment&&(c=de.properties.horizontalAdjustment+c)),c<0?{error:!0,body:"position.lass.then.zero"}:c+s>window.innerWidth?{error:!0,body:"position.great.then.window.innerWidth"}:d<0?{error:!0,body:"position.lass.then.zero"}:{error:!1,body:{leftPosition:c,topPosition:d,position:u.position}}}(e,t,o,n,r);if(a.error)return{error:!0,body:a.body};var s=document.getElementById(o);return s.style.left=a.body.leftPosition+"px",s.style.top=a.body.topPosition+"px",s.style.position=a.body.position,s.style.setProperty("position",a.body.position,"important"),be(s),we(s,e),{error:!1}}function U(e,t,o,n,r,a){if(!e)return ve.error("registerActivity - missing activity type");if(!t)return ve.error("registerActivity - missing activity status");if(!o||!o.alias)return ve.error("registerActivity - missing activity user");if(!n)return ve.error("registerActivity - missing activity object");var i=window.location.href;r=r||new Date;var s={};s.name=o.name||null,s.email=o.email||null,s.alias=o.alias,s.user=o._id||null;var l={};l.type=n.type,l.lastUpdate=n.lastUpdate,l.title=n.title,l._id=n._id,n.properties&&(l.properties=n.properties),"step"===e&&(l.order=n.order,l.flow=n.flow,l.placement=n.placement,l.element=n.element,n.messages&&(l.messages=n.messages));var c;try{var d={type:e,status:t,date:r,user:s,url:i,view:a,object:l};c=JSON.stringify(d,G)}catch(e){return ve.error("registerActivity - failed to mount or stringify object:",e)}if(ge)return ve.info("dont log activities");var u=K();O("POST",ie.analyticsUrl+"activities/",{onSuccess:function(e){},onError:function(e){ve.warn("failure registerActivity: ",e.message||e)},contentType:"application/json",authorization:u,data:c,externURI:!0})}function O(e,t,o){if(Ce)return o.onError({success:!1,message:"Failed to authenticate token. JsonWebTokenError: jwt malformed"});var n=o.data||null,r=o.responseType||"json",a=o.contentType||"application/json;charset=UTF-8",i=o.authorization||null,s=o.onSuccess||function(){},l=o.onError||function(){},c=null,d=o.externURI||!1,u=ie.baseURL;if(d&&(u=""),window.XMLHttpRequest)try{c=new XMLHttpRequest}catch(e){ve.warn("Internet Explorer"),c=new ActiveXObject("Microsoft.XMLHTTP")}else ve.error("window.XMLHttpRequest not work! :(");c.onreadystatechange=function(){4==c.readyState&&200==c.status&&s(c.response),4==c.readyState&&403==c.status&&(Ce=!0),4==c.readyState&&c.status>=400&&l(c.response)},c.open(e,u+t,!0),c.responseType=r,null!=a&&c.setRequestHeader("Content-Type",a),null!=i&&c.setRequestHeader("x-access-token",i),null!=n?c.send(n):c.send()}function R(e,t){x(),Y(),t();var o=X();o.alreadyStarted=!0,V(o),ce.currentStep=de,ce.save();var n=ee();U("step","start",ce,de,new Date,n),de.properties&&de.properties.integrateRdStation&&w(ce,ue,de)}function _(e,t,o,n){n=n||function(){},o=o||function(){},t=t||{},d();var r='<div id="conpassModalContent" class="conpassModalContent '+t.css+'"><button type="button" id="conpassButtonClose" class="conpassButtonClose">&times;</button><div id="conpassModalHeader" class="conpassModalHeader" style="background-color: '+ye.modal.headerBackground+' !important;"></div><div id="conpassModalBody" class="conpassModalBody"></div><div class="conpassModalFooter">',a=document.createElement("div");r+='<div class="conpassCenter">',de.order>1&&(r+='<div id="previousStep" class="previousStep" style="display:inline-block "><div id="previousBtn" class="simpleButtonConpass">ANTERIOR</div></div>'),r+='<button type="button" id="conpassButton" class="conpassButton conpassButtonVideo" style="background-color: '+ye.btnPrimaryColor+" !important; border-radius: "+ye.btnRadius+' !important;"></button></div>',r+="</div></div></div>",a.id="conpassModal",a.classList.add("conpassModal"),a.innerHTML=r,document.body.insertBefore(a,document.body.childNodes[0]),o(),document.getElementById("conpassButtonClose").addEventListener("click",f),document.getElementById("conpassButton").addEventListener("click",v);document.getElementById("previousStep")&&(document.getElementById("previousStep").addEventListener("click",function(){L()}),document.getElementById("previousBtn").innerText=e.properties.btnPreviousMsg);var i=document.getElementById("conpassButton");i&&(i.innerHTML=e.properties.buttonStartTxt),n()}function z(e,t,o){o=o||{logger:!0},q(e);try{var n=ee()||function(){var e=X();e||(e={});var t=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=0;o<40;o++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}();return e.view=t,V(e),t}();U("flow",t,ce,e,new Date,n),0!=o.logger&&Z({_id:e._id,title:e.title,startDate:new Date}),ue=e,ce.setFlow(e),ce.save(),window.startFlowCalled=!1,window.conpassInitHasCalled=!0,ve.info("Fluxo iniciado: ",ue.title),h(ge?Se():1)}catch(e){ve.error("Fluxo nao iniciado: "+ue.title+" Error:",e)}}function J(t,o){try{o=o||{},function(e,t){var o=X();o||((o={}).flow="");o.flow=e,V(o)}(t.title,K()),function(t){var o=t.assistant.showAssistant||!1,n=t.assistant.optionsAssistant||"avatar";if(o){if(c())return document.getElementById("pickAvatarButton")&&document.getElementById("pickAvatarButton").setAttribute("data-title",t.title),void(document.getElementById("conpassQuest")&&document.getElementById("conpassQuest").setAttribute("data-title",t.title));var r=document.createElement("div");r.id="conpassAssistant",r.classList.add("conpassAssistant"),r.innerHTML='<div id="conpassNews" class="conpassNews" style="display: none; background-color:'+t.assistant.symbolColorTheme+';"></div>';var a='<div id="conpassQuest" class="conpassQuest" data-title="'+t.title+'" style="background-color:'+t.assistant.symbolColorTheme+';" >?</div>',i='<img id="pickAvatarButton" class="pickAvatar" data-title="'+t.title+'" />';switch(n){case"avatar":r.innerHTML+=a,r.innerHTML+=i;break;case"symbol":r.innerHTML+=a;break;default:r.innerHTML+=a,r.innerHTML+=i}switch(document.body.insertBefore(r,document.body.lastChild),n){case"avatar":document.getElementById("pickAvatarButton").addEventListener("click",function(){var t=X();t.alreadyStarted=!1,V(t);var o=t.flow||this.dataset.title;Y(),s(),x(),F(),e.findFlowByTitle(o,K(),function(e){J(e,{show:!0,typeStartFlow:"startFlowByAssistant"})})}),document.getElementById("pickAvatarButton").src=t.assistant.imgAssistant;break;case"symbol":document.getElementById("conpassQuest").style.cursor="pointer",document.getElementById("conpassQuest").addEventListener("click",function(){var t=X();t.alreadyStarted=!1,V(t);var o=t.flow||this.dataset.title;Y(),s(),x(),F(),e.findFlowByTitle(o,K(),function(e){J(e,{show:!0,typeStartFlow:"startFlowByAssistant"})})})}document.body.addEventListener("scroll",function(){document.getElementById("conpassAssistant").setAttribute("top",document.body.scrollTop+"px;")}),document.getElementById("conpassAssistant").setAttribute("style","top:"+t.assistant.place+"px")}else l()}(t),o&&void 0!==o.isPreviewMode&&(ge=o.isPreviewMode||!1);var n=o.typeStartFlow||"start",r=o.show||!1;if(ve.info("Configurando o fluxo: ",t.title),r)z(t,n);else if(ce.currentStep&&ce.currentFlow&&!o.mainFlow)de&&P(de.namePopover),ue=ce.currentFlow,de=ce.currentStep,Z({_id:ue._id,title:ue.title,startDate:new Date}),h(de.order);else if(ce.history){for(var a=!1,i=0;i<ce.history.length;i++){if(ce.history[i].title==t.title){a=!0;break}}a?ve.warn("O Usuario ja seguiu este fluxo: ",t.title):z(t,n)}}catch(e){ve.error("Fluxo nao configurado: "+t.title+" Error:",e)}}function q(e,t){var o=e.theme,n=o?o.popover:null,r=o?o.modal:null,a=o?o.btnPrimaryColor:"#7adfba",i=r?r.headerBackground:"#12c1c7";t&&t.properties&&t.properties.colorTheme&&"#12c1c7"!==t.properties.colorTheme&&(a=t.properties.colorTheme,i=t.properties.colorTheme),ye={},o&&(ye={btnPrimaryColor:a,btnBackColor:o.btnBackColor||"transparent",btnTextColor:o.btnTextColor||null,btnTextHoverColor:o.btnTextHoverColor||null,btnRadius:o.btnRadius||"4px",fontPrimaryColor:o.fontPrimaryColor||null,overlayColor:o.overlayColor||"0,0,0",overlayOpacity:o.overlayOpacity||"0.5"}),o||(ye.btnPrimaryColor=a),ye.popover={background:n?n.background:null,radius:n?n.radius:"6px",fontColor:n?n.fontColor:null},ye.modal={background:r?r.background:null,radius:r?r.radius:"6px",headerBackground:i},r&&r.fontColor?ye.modal.fontColor=r.fontColor:o&&(ye.modal.fontColor=o.fontPrimaryColor);var s=document.getElementById("customStyleTag");if(s&&s.parentNode.removeChild(s),o){var l=document.createElement("style"),c="";ye.popover.background&&(c+=".conpassPopover.bottom-left::after { border-left-color: "+ye.popover.background+" !important; }",c+=".conpassPopover.bottom-right::after { border-left-color: "+ye.popover.background+" !important; }",c+=".conpassPopover.bottom::after { border-bottom-color: "+ye.popover.background+" !important; }",c+=".conpassPopover.right::after { border-right-color: "+ye.popover.background+" !important; }",c+=".conpassPopover.left::after { border-left-color: "+ye.popover.background+" !important; }",c+=".conpassPopover.top::after { border-top-color: "+ye.popover.background+" !important; }",c+=".conpassPopover.top-right::after { border-left-color: "+ye.popover.background+" !important; }",c+=".conpassPopover.top-left::after { border-left-color: "+ye.popover.background+" !important; }"),ye.btnTextColor&&(c+=".conpassButton { color: "+ye.btnTextColor+" !important; }",c+=".nextMessage .simpleButtonConpass, .previousMessage .simpleButtonConpass { color: "+ye.btnTextColor+" !important; }"),ye.btnTextHoverColor&&(c+=".conpassButton:hover { color: "+ye.btnTextHoverColor+" !important; }",c+=".nextMessage .simpleButtonConpass:hover, .previousMessage .simpleButtonConpass:hover { color: "+ye.btnTextHoverColor+" !important; }"),l.innerHTML=c,l.id="customStyleTag",l.type="text/css",document.getElementsByTagName("head")[0].appendChild(l)}}function W(e,t,o){var n=new Date;n.setTime(n.getTime()+24*o*60*60*1e3);var r="expires="+n.toUTCString();document.cookie=e+"="+t+"; "+r}function Q(e){for(var e=e+"=",t=document.cookie.split(";"),o=0;o<t.length;o++){for(var n=t[o];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(e))return n.substring(e.length,n.length)}return null}function X(){try{if("undefined"==typeof Storage){e=Q("conpass");return e?JSON.parse(e):null}try{var e;return(e=localStorage.getItem("conpass"))?JSON.parse(e):null}catch(e){ve.error("getConpassData - error:",e)}}catch(e){ve.error("get Storage & Cookie - try error:",e)}}function V(e){try{if("undefined"!=typeof Storage)try{localStorage.setItem("conpass",JSON.stringify(e,G))}catch(t){ve.error("setConpassData - obj:",e),ve.error("setConpassData - try error",t)}else W("conpass",JSON.stringify(e,G),365)}catch(e){ve.error("set Storage & Cookie - try error:",e)}}function G(e,t){if("elementInPage"!==e)return t}function Y(){var e=X();try{clearTimeout(e.timeoutID)}catch(e){ve.warn("Nao aplicou a limpeza de Timeout - causa:",e)}try{clearInterval(e.timeoutID)}catch(e){ve.warn("Nao aplicou a limpeza de Interval - causa:",e)}e.timeoutID="",V(e)}function K(){return X()?X().token||window.cpt:window.cpt}function Z(e){if(ce.history.length<1)return ce.history.push(e),ve.log("Historico do usuario criado e atualizado."),void ce.save();for(var t=!0,o=0;o<ce.history.length;o++){var n=ce.history[o];if(n.title==e.title){n=e,t=!1;break}}t&&(ce.history.push(e),ve.log("Historico do usuario atualizado."),ce.save())}function $(){var e=X();return e&&e.user?e.user:null}function ee(){var e=null,t=X();return t&&(e=t.view),e}function te(){var e=X();e&&e.user&&(e.view=null,V(e))}function oe(){if(!Be.redefinePostion.running)if(Be.redefinePostion.running=!0,i())Be.redefinePostion.running=!1;else{if(de&&document.getElementById(de.namePopover)){de.elementInPage||(de.elementInPage=b(de.elementInPage,de.elementSelector));var e=D(de.elementInPage);if(!e||jConpass(de.elementInPage).is(":hidden")){var t=parseInt(de.order)-2;return"onMouseOver"===ue.steps[t].triggerMode&&L(),void(Be.redefinePostion.running=!1)}Te.top==e.top&&Te.left==e.left||(le(de.placement,de.element,de.namePopover,de.elementInPage,de.elementSelector),de.useFade&&(n(e),o(de.elementInPage))),Te=e}Be.redefinePostion.running=!1}}function ne(e){var t=jConpass(e).parents("body");return jConpass(window.parent.document.body).find("iframe").filter(function(){try{var e=jConpass(this).contents().find("body");return t.get(0)===e.get(0)}catch(e){return!1}})}function re(e,t){var o=window.getComputedStyle(e),n="absolute"===o.position,r=t?/(auto|scroll|hidden)/:/(auto|scroll)/;if("fixed"===o.position)return document.body;for(var a=e;a=a.parentElement;)if(o=window.getComputedStyle(a),(!n||"static"!==o.position)&&r.test(o.overflow+o.overflowY+o.overflowX))return a;return document.body}function ae(e){var t=jConpass(e).parents("body");return jConpass(window.parent.document.body).get(0)!==t.get(0)}var ie={baseURL:"https://api2.conpass.io/v2/",analyticsUrl:"https://analytics.conpass.io/v2/"},se=function(){var e="Conpass informa:",t=!1,o=[];this.log=function(){var n=Array.prototype.slice.call(arguments);n.unshift(e+" "),t?console.log.apply(console,n):o.push({level:"log",args:n})},this.info=function(){var n=Array.prototype.slice.call(arguments);n.unshift(e+" "),t?console.info.apply(console,n):o.push({level:"info",args:n})},this.warn=function(){var n=Array.prototype.slice.call(arguments);n.unshift(e+" "),t?console.warn.apply(console,n):o.push({level:"warn",args:n})},this.error=function(){var n=Array.prototype.slice.call(arguments);n.unshift(e+" "),t?console.error.apply(console,n):o.push({level:"error",args:n})},this.debug=function(){var n=Array.prototype.slice.call(arguments);n.unshift(e+" "),t?console.debug.apply(console,n):o.push({level:"debug",args:n})},this.stop=function(){t=!1},this.start=function(){for(var e=0;e<o.length;e++){var n=o[e];"log"==n.level&&console.log.apply(console,n.args),"info"==n.level&&console.info.apply(console,n.args),"warn"==n.level&&console.warn.apply(console,n.args),"error"==n.level&&console.error.apply(console,n.args),"debug"==n.level&&console.debug.apply(console,n.args)}o=[],t=!0}},le=function(e,t,o,n,r){e||(e="top");var a=N(e,t,o,n,r);if(a.error)for(var i=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],s=0;s<i.length;s++){if(!(a=N(e=i[s],t,o,n,r)).error)break}},ce=new function(){var e=this;this.newAlias=function(){var e=j(window.location.hostname.replace(/\./g,""));return"conpassUser_"+(new Date).getMilliseconds()+Math.round(1e5*Math.random())+"_"+e},this.getLocation=function(){var e={};return e.hostname=window.location.hostname,e.port=window.location.port,e.protocol=window.location.protocol,e.href=window.location.href,e.hash=window.location.hash,e.path=window.location.path,e.origin=window.location.origin,e},this.getHost=function(){return window.location.host},this.getNavigator=function(){return window.navigator},this._id=null,this.name=null,this.email=null,this.history=[],this.custom_fields={},this.lastUpdate=(new Date).toString(),this.alias=e.newAlias(),this.currentFlow=null,this.currentStep=null,this.needToSync=!1,this.host=this.getHost(),this.location=this.getLocation(),this.navigator=this.getNavigator(),this.identify=function(e,t){ve.log("Iniciada a identificacao do usuario."),t=t||function(){},e?e.email?this.getAndSetUser(e,t):ve.warn("User email is NULL. [Conpass identify User]"):ve.warn("Properties is NULL. [Conpass identify User]")},this.getAndSetUser=function(o,n){var r=function(o,r){o?(o.custom_fields=r.custom_fields||{},t(o)):(e.name=r.name,e.email=r.email,e.custom_fields=r.custom_fields||{}),e.setInStore(),n()},a=$();a&&(a.email==o.email?r(a,o):a=null),a||function(e,t){var t=t||{},e=e||null,o=K();e&&O("GET","pixel/users/email/"+e,{onSuccess:function(e){ve.info("Usuario atualizado pelo email"),t(e.data)},onError:function(e){t(null),ve.error("Erro ao atualizar o usuario pelo email.")},contentType:"application/json",authorization:o})}(o.email,function(e){r(e,o)})},this.identifyOnInit=function(e,t){if(t=t||function(){},e){if(!e.email)return void ve.warn("Email é obrigatorio na identificacao do usuario.");if(e.needToSync||0==e.needToSync)return ve.info("Usuario ja identificado."),void t();var o={};if(o.email=e.email,o.name=e.name||null,e.custom_fields)o.custom_fields=e.custom_fields;else{var n=e;delete n.name,delete n.email,o.custom_fields=n}o.custom_fields.last_page_url=document.referrer,this.identify(o,function(){t()})}else{ve.info("Nao ha dados para identificacao do usuario (Anonimo).");var r=$();r&&r.email&&this.clearUserFromLocalStorage(),this.init(function(){t()})}},this.setFlow=function(e){this.currentFlow=e},this.setStep=function(e){this.currentStep=e},this.init=function(o){var n=$();if(n)return t(n),void o();(n=null)||function(t,o){O("GET","pixel/users/alias/"+e.alias,{onSuccess:function(e){var t=e[0];o(t)},onError:function(e){ve.error("Erro ao carregar dados do usuario.",e),o(null)},authorization:K()})}(0,function(n){n&&(t(n),e.currentFlow=n.currentFlow||e.currentFlow,e.currentStep=n.currentStep||e.currentStep),o()})},this.save=function(t,o){var t=t||function(e){},o=o||{};e.alias=e.alias||e.newAlias(),e.lastUpdate=(new Date).toString(),e.setInStore(),t(o)},this.persist=function(){e._id?e.put():e.post()},this.sync=function(){},this.put=function(t,o){var o=o||{},t=t||function(){};ge?t(o):function(e,t){O("PUT","pixel/users/",{onSuccess:function(e){ve.info("Usuario atualizado."),t(e.data)},onError:function(e){ve.error("Erro ao atualizar usuario: ",e),t(null)},contentType:"application/json",authorization:K(),data:JSON.stringify(e,G)})}(e.toJson(),function(n){n&&(e._id=n._id),e.setInStore(),ve.info("Dados do usuario sicronizados entre o servidor da Conpass e LocalStorage(navegador)."),t(o)})},this.post=function(t,o){var o=o||{},t=t||function(){};ge?t(o):function(e,t){O("POST","pixel/users/",{onSuccess:function(e){ve.info("Usuario criado."),t(e.data)},onError:function(e){ve.error("Erro ao criar usuario: ",e),t(null)},contentType:"application/json",authorization:K(),data:JSON.stringify(e,G)})}(e.toJson(),function(n){n&&(e._id=n._id),e.setInStore(),ve.info("Dados do usuario sicronizados entre o servidor da Conpass e LocalStorage(navegador)"),t(o)})},this.toJson=function(){var t={name:e.name,email:e.email,alias:e.alias,lastUpdate:e.lastUpdate,currentFlow:e.currentFlow,currentStep:e.currentStep,history:e.history,custom_fields:e.custom_fields};return e._id&&(t._id=e._id),t},this.toParam=function(){return{_id:e._id,name:e.name,email:e.email,alias:e.alias,custom_fields:e.custom_fields}},this.setInStore=function(){var t=e.toJson();t.currentStep&&t.currentStep.elementInPage&&(t.currentStep.elementInPage=null);var o=X();o&&(o.user=t,V(o))};var t=function(t){e._id=t._id,e.name=t.name,e.email=t.email,e.history=t.history,e.custom_fields=t.custom_fields,e.lastUpdate=(new Date).toString(),e.alias=t.alias||e.newAlias(),e.currentFlow=t.currentFlow,e.currentStep=o(e.currentStep,t.currentStep),e.needToSync=t.needToSync,e.host=t.host||e.getHost(),e.location=t.location||e.getLocation(),e.navigator=t.navigator||e.getNavigator()},o=function(e,t){return e||t?e&&!t?e:!e&&t?t:e.order<t.order?t:e:null};this.delete=function(){this.clearUserFromLocalStorage(),function(e,t){O("DELETE","pixel/users/"+e,{onSuccess:function(e){t(!1)},onError:function(e){ve.error("Erro ao excluir usuario: ",e),t(!0)},authorization:K()})}(this.id,function(e){e||ve.log("Dados do usuario deletado do servidor da Conpass.")})},this.clearUserFromLocalStorage=function(){var e=X();e&&(e.user=null,V(e)),ve.log("Dados do usuario deletado do LocalStorage.")}},de={},ue={},pe={},fe={},me="",ve=new se,ge=!1,ye={},he={click:null,mouseenter:null,mouseleave:null};e.appUrl="https://conpass.io/js/",e.version="2.10.0",ve.info("versao 2.10.0"),e.init=function(t,o){ve.log("Iniciada! ;)"),window.conpassInitHasCalled||(window.conpassInitHasCalled=!0,e.setup(window.cpt,function(){i()||(Be.init(),ve.info("Pre configuracoes concluidas. ;)"),ce.identifyOnInit(t,function(){window.conpassInitHasCalled=!1,o?Conpass.startFlow(o):function(){var t=window.location.href.replace(/.*?:\/\//g,"");ve.log("Pesquisando fluxo que inicializa pela URL:",t),e.findFlowByUrl(t,function(o){if(o){s(),Y();var n=X();n&&(o.title,n.flow),ve.log("Fluxo iniciado pela URL:",t),J(o,{typeStartFlow:"startFlowByUrl"})}else e.startFlowByOnLoad()})}()}))}))},e.setup=function(e,t){t=t||function(){},e&&function(e){var t=X();t||((t={}).token={}),t.token=e,V(t)}(e),function(e){e=e||function(e){};try{Conpass.loadfile("conpassApp.css","css")}catch(e){ve.warn("Falha ao carregar Conpass CSS")}window.jQuery?(window.jConpass=window.jQuery,a(e)):(ve.log("Carregando dependencia: jConpass"),Conpass.loadfile("jConpass.js","js",Conpass.appUrl,function(){a(e)}))}(function(e){ve.info("Dependencias da Conpass configuradas."),window.addEventListener("resize",function(){oe()},!1),window.addEventListener?window.addEventListener("hashchange",r,!1):window.attachEvent&&window.attachEvent("onhashchange",r),t()})},e.setupForExtension=function(t,o,n){e.setup(t||window.cpt,function(){i()||(Be.init(),ce||ce.init(),e.startFlowByJSON(o,n))})},e.user=ce,e.close=function(){Conpass.Logger.start(),ve.log("Comando Close iniciado. [DESCONTINUADO - Nao utiliar]")},e.reset=function(){Conpass.Logger.start(),ve.log("Reset iniciado. Todas as informações sobre o usuario atual serao apagadas."),l(),s(),ve.log("Dados da Conpass deletados do LocalStorage."),ce.delete()},e.unistall=function(){ve.log("Comando Unistall iniciado"),l()},e.inProgress=function(){var t=e.getConpassData();if(t&&t.user){var o=new Date(t.user.lastUpdate.toString()),n=new Date;if(n>o){if(n.setHours(n.getHours()-1),n<=o)return!0}else if(n==o)return!0}return!1},e.goToStep=function(e){if(x(),de){var t=ee();U("step","finished",ce,de,new Date,t)}h(e)},e.finishFlow=function(){x();var e=ee();U("step","finished",ce,de,new Date,e),U("flow","finished",ce,ue,new Date,e),F(),ce.persist()},e.identifyUserAndStartFlow=function(e,t){Conpass.init(e,t)},e.Logger=ve;var we=function(e,t){switch(t){case"top":e.classList.add("top");break;case"left":e.classList.add("left");break;case"right":e.classList.add("right");break;case"bottom":e.classList.add("bottom");break;case"bottom-left":e.classList.add("bottom-left");break;case"bottom-right":e.classList.add("bottom-right");break;case"top-left":e.classList.add("top-left");break;case"top-right":e.classList.add("top-right");break;default:e.classList.add("top")}},be=function(e){for(var t=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],o=0;o<t.length;o++){var n=t[o];e.classList.remove(n)}};e.findFlowByUrl=function(e,t){var o=K(),n=JSON.stringify(ce.toParam());O("GET","pixel/flows?q[url]="+encodeURIComponent(e)+"&user="+encodeURIComponent(n),{contentType:"application/json",authorization:o,onSuccess:function(o){o.data?t(o.data):(ce.custom_fields&&ce.custom_fields.length>0?(ve.info("Nao ha fluxo para a URL informada e com a seguinte segmentacao:",ce.custom_fields),ve.info("URL informada:",e)):ve.info("Nao ha fluxo para essa URL:",e),t(null))},onError:function(e){ve.error("Erro ao carregar fluxo pela url.",e)}})},e.findFlowByTitle=function(e,t,o){var n=JSON.stringify(ce.toParam());O("GET","pixel/flows/title/"+e+"/?user="+encodeURIComponent(n),{contentType:"application/json",authorization:t,onSuccess:function(t){t.data?o(t.data):ve.info("Fluxo nao encontrado atraves do titulo:",e)},onError:function(e){ve.error("Erro ao carregar fluxo pelo titulo.",e)}})},e.findFlow=function(e,t,o){var n=JSON.stringify(ce.toParam());O("GET","pixel/flows/"+e+"/?user="+encodeURIComponent(n),{contentType:"application/json",authorization:t,data:JSON.stringify(ce.toJson(),G),onSuccess:function(e){e.data?o(e.data):ve.info("Fluxo nao encontrado.")},onError:function(e){ve.error("Erro ao carregar fluxo.",e)}})};var Ce=!1;e.startFlowByOnLoad=function(t){t=t||function(){};var o=e.getConpassData();if(!o.alreadyStarted||!o.flow)return c()&&l(),t(!0);e.findFlowByTitle(o.flow,K(),function(e){J(e,{alreadyStarted:o.alreadyStarted,typeStartFlow:"startFlowByOnLoad"})}),t(!1)};!function(e){e.set=W,e.get=Q}({});e.startFlowById=function(t,o){(o=o||{}).typeStartFlow="startFlowById",i()||(s(),Y(),l(),e.findFlow(t,K(),function(e){if(o.mainFLow){var t=X();t.mainFlow=o.mainFLow,V(t)}J(e,o)}))};var Ee=function(t,o){ve.log("Fluxo iniciado por Linha de comando:",t),(o=o||{}).typeStartFlow="startFlowByCommandLine",i()||e.findFlowByTitle(t,K(),function(e){s(),Y();var t=X();t&&e.title!=t.flow&&F(),J(e,o)})};e.startFlow=function(e,t){if(window.startFlowCalled=!0,t=t||null,e instanceof Array)for(var o=0;o<e.length;o++)Ee(e[o],t);else Ee(e,t)},e.startFlowByJSON=function(e,t){if(t=t||null,!i()){Y(),t&&void 0!==t.isPreviewMode&&(ge=t.isPreviewMode||!1),oe(),ue=e,de=e.steps[0];z(e,"startFlowByJSON",t)}},e.getConpassData=function(){return X()};var Se=function(){return X().currentFlow||1},Ie=function(e){var t=X();t.currentFlow=e,V(t)};e.resetPreviewMode=function(){Ie(1)},e.identifyUser=function(e,t){Conpass.init(e,null)};var Be={init:function(){ke()},redefinePostion:{running:!1}},Te={top:-1,left:-1},ke=function(){var e=setInterval(function(){oe(),clearInterval(e),ke()},50)};e.loadfile=function(e,t,o,n){var n=n||{},r=o||"https://fast.conpass.io/";if(-1==me.indexOf("["+e+"]")){if(e=r+e,"js"==t){(a=document.createElement("script")).setAttribute("type","text/javascript"),a.setAttribute("src",e),a.onload=a.onreadystatechange=function(){a.onreadystatechange=a.onload=null,n()}}else if("css"==t){var a=document.createElement("link");a.setAttribute("rel","stylesheet"),a.setAttribute("type","text/css"),a.setAttribute("href",e)}void 0!==a&&document.getElementsByTagName("head")[0].appendChild(a),me+="["+e+"]"}};se=function(){var e=this;this.doLog=!1,this.log=function(t){e.doLog&&console.log(t)},this.warn=function(t){e.doLog&&console.warn(t)},this.error=function(t){e.doLog&&console.error(t)}};return e.user=ce,e.routeChange=function(){window.conpassInitHasCalled=!1,window.startFlowCalled=!1,ce.needToSync=!1,ve.log("Foi reiniciada via comando: routeChange."),Conpass.init(ce)},e.debug=function(){Conpass.Logger.start()},e.getCookie=function(e){return Q(e)},e.run=function(){try{if(!(new XMLSerializer).serializeToString(document).includes("Conpass.identifyUser")){var e=X();ve.log("Foi reiniciada via comando: run."),Conpass.init(e.user)}}catch(e){ve.log("Falhou inicialização. [Mude a versão do script da Conpass para 3.X]")}},e}(Conpass||{});Conpass.run();